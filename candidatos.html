<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Avaliação de Candidatos - Professores</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@500;700&family=Comfortaa:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body class="h-screen flex flex-col">
  <header class="relative bg-orange-500 h-16 flex items-center px-6 shadow-md">
    <div class="absolute right-0 top-0 h-full w-1/4 bg-orange-500 shadow-[inset_5px_0_15px_rgba(0,0,0,0.1)] rounded-bl-3xl"></div>
    <div class="relative z-10 flex items-center">
      <div class="bg-gray-300 w-12 h-12 rounded-lg mr-4"></div>
      <div>
        <h1 id="tituloPrincipal" class="text-xl text-white font-bold">Avaliação de Candidatos</h1>
        <p id="subtitulo" class="text-xs text-orange-100 font-comfortaa">Ester Calazans: Administradora geral</p>
      </div>
    </div>
  </header>

  <div class="flex flex-1 overflow-hidden">
    <nav class="bg-gray-200 w-20 flex flex-col items-center py-6 space-y-4 rounded-r-3xl">
      <a href="index.html" class="w-12 h-12 border-2 border-orange-500 rounded-xl hover:bg-orange-500 transition duration-300 flex items-center justify-center" title="Dashboard Principal">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
      </a>
      <a href="section-edicao.html" class="w-12 h-12 border-2 border-orange-500 rounded-xl hover:bg-orange-500 transition duration-300 flex items-center justify-center" title="Edição de Perfis">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
      </a>
      <button class="w-12 h-12 border-2 border-orange-500 bg-orange-500 rounded-xl transition duration-300" title="Avaliação de Candidatos (Atual)"></button>
    </nav>

    <main class="flex-1 bg-gray-200 m-6 rounded-3xl shadow-inner overflow-hidden relative p-4">
      <div class="flex h-full gap-4">

        <!-- COLUNA 1 -->
        <div class="w-1/4 flex flex-col gap-3">
          <div class="bg-white rounded-lg shadow-sm p-3">
            <h3 class="font-semibold text-gray-700 mb-2 text-sm">Filtros</h3>
            <div class="mb-3">
              <label class="block text-xs font-medium text-gray-700 mb-1">Status</label>
              <select id="filtroStatus" class="w-full border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-orange-500">
                <option value="">Todos</option>
                <option value="Candidato">Candidato</option>
                <option value="Aprovado">Aprovado</option>
                <option value="Reprovado">Reprovado</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-medium text-gray-700 mb-1">Disciplina</label>
              <select id="filtroDisciplina" class="w-full border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-orange-500">
                <option value="">Todas</option>
              </select>
            </div>
            <!-- Novo Filtro: Data Entrevista -->
            <div class="mb-3">
              <label class="block text-xs font-medium text-gray-700 mb-1">Data Entrevista</label>
              <select id="filtroDataEntrevista" class="w-full border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-orange-500">
                <option value="">Todos</option>
                <option value="semData">Sem data de Entrevista Definida</option>
                <option value="selecionarMes">Selecionar Mês</option>
              </select>
            </div>
            <!-- Lista de meses (inicialmente oculta) -->
            <div id="listaMeses" class="hidden mt-2 space-y-1">
              <!-- Meses serão preenchidos via JavaScript -->
            </div>
          </div>

          <div class="bg-white rounded-lg shadow-sm flex-1 flex flex-col">
            <h3 class="font-semibold text-gray-700 p-3 border-b text-sm">Candidatos</h3>
            <div id="listaCandidatos" class="flex-1 overflow-y-auto"></div>
          </div>
        </div>

        <!-- COLUNA CENTRAL -->
        <div class="w-2/4 flex flex-col gap-3 min-h-0">
          <div id="sectionDisponibilidade" class="bg-white rounded-lg shadow-sm p-3">
            <h3 class="font-semibold text-gray-700 mb-2 text-sm">Disponibilidade</h3>
            <div class="overflow-x-auto">
              <table class="w-full text-xs availability-table">
                <thead>
                  <tr class="border-b">
                    <th>Turno</th><th>Seg</th><th>Ter</th><th>Qua</th><th>Qui</th><th>Sex</th><th>Sáb</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>Manhã</td><td id="segManha">-</td><td id="terManha">-</td><td id="quaManha">-</td><td id="quiManha">-</td><td id="sexManha">-</td><td id="sabManha">-</td></tr>
                  <tr><td>Tarde</td><td id="segTarde">-</td><td id="terTarde">-</td><td id="quaTarde">-</td><td id="quiTarde">-</td><td id="sexTarde">-</td><td id="sabTarde">-</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <section id="sectionDisciplinas" class="bg-white rounded-lg shadow-sm p-3 disciplinas-section reduzida">
            <h3 class="font-semibold text-gray-700 mb-2 text-sm">Disciplinas</h3>
            <div id="gridDisciplinas" class="grid-disciplinas-scroll"></div>
          </section>

          <div class="flex gap-3 mt-2 min-h-0">
            <div id="informacoesWrapper" class="w-1/2 bg-white rounded-lg shadow-sm p-3 flex flex-col min-h-0">
              <h3 class="font-semibold text-gray-700 mb-2 text-sm">Informações</h3>
              <div id="informacoesCandidato" class="flex-1 overflow-y-auto text-xs"></div>
            </div>

            <div id="experienciasWrapper" class="w-1/2 bg-white rounded-lg shadow-sm p-3 flex flex-col min-h-0">
              <h3 class="font-semibold text-gray-700 mb-2 text-sm">Experiências</h3>
              <div id="experienciasConteudo" class="flex-1 overflow-y-auto text-xs">
                <div id="sectionAulas" class="bg-gray-50 rounded p-2 mb-2">
                  <h4 class="text-xs font-semibold mb-1 text-gray-700">Exp. com Aulas particulares</h4>
                  <div id="descricaoAulas" class="text-xs text-gray-600 mb-3"></div>
                </div>
                <div id="sectionNeuro" class="bg-gray-50 rounded p-2 mb-2">
                  <h4 class="text-xs font-semibold mb-1 text-gray-700">Exp. com alunos atípicos</h4>
                  <div id="descricaoNeuro" class="text-xs text-gray-600 mb-3"></div>
                </div>
                <div id="sectionTdics" class="bg-gray-50 rounded p-2">
                  <h4 class="text-xs font-semibold mb-1 text-gray-700">Conhecimento em TDICs</h4>
                  <div id="descricaoTdics" class="text-xs text-gray-600 mb-3"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AVALIAÇÃO -->
        <div id="avaliacaoWrapper" class="w-1/4 bg-white rounded-lg shadow-sm p-3 flex flex-col">
          <h3 class="font-semibold text-gray-700 mb-2 text-sm">Avaliação</h3>

          <!-- Nova seção: Data e Horário da entrevista -->
          <div class="mb-3">
            <label class="text-xs font-semibold text-gray-700 mb-1">Data e Horário da entrevista</label>
            <div class="flex gap-2">
              <input type="text" id="dataEntrevista" placeholder="DD/MM/YYYY" 
                     class="flex-1 border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-orange-500">
              <input type="text" id="horaEntrevista" placeholder="HH:MM" 
                     class="w-1/3 border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-orange-500">
            </div>
          </div>

          <!-- Nova seção: Link da entrevista -->
          <div class="mb-3">
            <label class="text-xs font-semibold text-gray-700 mb-1">Link da entrevista</label>
            <div class="flex gap-2">
              <input type="text" id="linkEntrevista" 
                     class="flex-1 border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-orange-500">
              <button id="btnCopiarLink" class="bg-gray-500 text-white text-xs px-2 rounded hover:bg-gray-600 transition">Copiar</button>
            </div>
          </div>

          <textarea id="impressoesCandidato" placeholder="Comentários do avaliador"
            class="w-full border rounded p-2 text-xs mb-3"></textarea>

          <label class="text-xs font-semibold text-gray-700 mb-1">Status</label>
          <select id="statusCandidato" class="w-full border rounded p-1 text-xs mb-3 text-gray-700">
            <option value="Candidato">Candidato</option>
            <option value="Reprovado">Reprovado</option>
            <option value="Aprovado">Aprovado</option>
          </select>

          <!-- Novo botão: Salvar alterações -->
          <button id="btnSalvarAlteracoes" class="w-full bg-green-600 text-white text-xs p-2 rounded mb-2 hover:bg-green-700 transition">
            Salvar alterações
          </button>

          <label class="text-xs font-semibold text-gray-700 mb-1">Enviar Relatório</label>
          <button id="btnCopiarRelatorio" class="w-full bg-orange-500 text-white text-xs p-2 rounded mb-2 hover:bg-orange-600 transition">Copiar Relatório</button>

          <!-- Botões de status atualizados -->
          <div class="flex justify-between mb-4 space-x-2">
            <button id="btnReprovado" class="border border-red-500 text-red-500 text-xs rounded px-2 py-1 flex-1 transition">Candidato Reprovado</button>
            <button id="btnDesistente" class="border border-red-700 text-red-700 text-xs rounded px-2 py-1 flex-1 transition">Candidato Desistente</button>
            <button id="btnAprovado" class="border border-green-500 text-green-500 text-xs rounded px-2 py-1 flex-1 transition">Candidato Aprovado</button>
          </div>

          <div class="flex justify-between mt-auto">
            <button id="btnExcluirCandidato" class="bg-red-600 text-white text-xs p-2 rounded w-[48%] hover:bg-red-700 transition">Excluir Candidato</button>
            <button id="btnSalvarCandidato" class="bg-green-600 text-white text-xs p-2 rounded w-[48%] hover:bg-green-700 transition">Salvar Candidato</button>
          </div>
        </div>

      </div>
    </main>
  </div>

  <!-- POPUP -->
  <div id="popupOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div id="popupBox" class="bg-white rounded-lg shadow-lg p-4 w-96">
      <h3 id="popupTitle" class="font-semibold text-gray-800 text-sm mb-2"></h3>
      <p id="popupMessage" class="text-xs text-gray-600 mb-4"></p>
      <div class="flex justify-end space-x-2">
        <button id="popupCancel" class="bg-gray-300 text-gray-700 text-xs px-3 py-1 rounded hover:bg-gray-400 transition">Cancelar</button>
        <button id="popupConfirm" class="bg-green-600 text-white text-xs px-3 py-1 rounded hover:bg-green-700 transition">Confirmo</button>
      </div>
    </div>
  </div>

  <script src="script-candidatos.js"></script>
</body>
</html>